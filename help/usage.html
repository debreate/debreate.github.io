<!DOCTYPE html>

<html>
<head>
  <meta charset="utf-8">
  <title>Debreate Usage</title>
  <link rel="stylesheet" type="text/css" href="/css/main.css">
  <script type="text/javascript" src="/js/loader.js"></script>
  <script type="text/javascript" src="/js/screens.js"></script>
  <script type="text/javascript" src="/js/footer.js"></script>
</head>

<body>
  <div class="title-box">
    <div class="title">Using Debreate</div>
  </div>

  <div class="main-box">
    <div class="box center">
      <p><em>This page is a work-in-progress. See
      <a href="https://debreate.sourceforge.net/res/doc/usage_en.pdf">this old PDF file</a> for more
      complete usage information.</a></em></p>
      <p><a href="/">take me back</a></p>
    </div>

    <a name="toc"></a>
    <div class="box" id="toc-box">
      <h1>Contents</h1>
      <ul id="toc">
        <li><a href="#package-managers">Packages &amp; Package Managers</a></li>
        <ul>
          <li><a href="#binary-packages">Binary Packages</a></li>
          <li><a href="#source-packages">Source Packages</a></li>
          <li><a href="#debreates-role">Debreate's Role</a></li>
        </ul>
        <li><a href="#ui">Debreate's UI</a></li>
        <li><a href="#control">Control File</a></li>
        <li><a href="#depends">Dependencies &amp; Conflicts</a></li>
        <li><a href="#files">Files</a></li>
        <li><a href="#scripts">Scripts</a></li>
        <li><a href="#changelog">Changelog</a></li>
        <li><a href="#copyright">Copyright</a></li>
        <li><a href="#menu">Menu</a></li>
        <li><a href="#build">Build</a></li>
      </ul>
    </div>

    <a name="package-managers"></a>
    <div class="box">
      <h1 class="section-header"><a href="#toc-box">Packages &amp; Package Managers</a></h1>

      <p>
        Most Linux and BSD based operating systems use
        <a href="https://en.wikipedia.org/wiki/Package_manager">package managers</a>
        to install &amp; organize software. This software is bundled in compressed archives. Debian
        based systems use the Debian Package Management System (dpkg) and the Advanced Packaging
        Tool (apt). There are also a number of GUI front-ends such as Synaptic that can be used as
        well.
      </p>

      <a name="binary-packages"></a>
      <h2>Binary Packages</h2>

      <p>
        The term "binary package" refers to a software archive assembled for deployment &amp; active
        use within a system. Not only do binary packages serve to distribute software applications,
        they can also be used for non-executable media such as images, audio, fonts, configuration
        files, etc.
      </p>

      <a name="source-packages"></a>
      <h2>Source Packages</h2>
      <p>
        Source packages require steps to prepare the contents for system use. Often part of the
        process includes compiling text source code into machine code to be executed on the host
        system or targeted at another platform (
        <a href="https://en.wikipedia.org/wiki/Cross_compiler">cross-compiling</a>). Many source
        packages include instructions for build systems on how the contents the archive should be
        installed to the system. This allows the build tools to stage files in preparation for
        inclusion into a binary package.
      </p>

      <a name="debreates-role"></a>
      <h2>Debreate's Role</h2>
      <p>
        As of yet, Debreate does not support creating source packages or the creation of binary
        packages from source. It is currently only capable of the manual creation of .deb packages
        using specified files ready for system deployment.
      </p>
    </div>

    <a name="ui"></a>
    <div class="box">
      <h1><a href="#toc-box">Debreate's UI</a></h1>

      <h2>Startup</h2>
      <p>
        If the app's configuration file is not found on the system a dialog will display with a
        first time run message. A new configuration with default values will be created in
        <tt>${HOME}/.config/debreate.conf</tt>. Close the dialog to access the main interface.
      </p>

      <a class="app-screen" href="/res/screenshot/00-firstrun.png"></a>

      <p>
        The UI implements a wizard-link layout. Navigation is done via the
        <img src="/res/button/next.png" title="next"> &amp;
        <img src="/res/button/prev.png" title="previous"> buttons to the top-right of the window or
        from the "Page" menu. For a[n old] video tutorial, click the link labelled
        "<a href="https://youtu.be/kx4D5eL6HKE">Building a DebianPackage with Debreate</a>" on the
        Information page.
      </p>

      <a class="app-screen" href="/res/screenshot/01-information.png"></a>

      <p><em>TODO: menu &amp; dialogs information</em></p>
    </div>

    <a name="control"></a>
    <div class="box">
      <h1><a href="#toc-box">Control File</a></h1>
      <p>
        .deb packages contain the file <tt>DEBIAN/control</tt>. This file contains meta information
        about the package. Such as the package name, package version, author, &amp; requirements.
        This page is the first half of filling out the control file information.
      </p>

      <a class="app-screen" href="/res/screenshot/02-control.png"></a>

      <p>
        It is divided into three sections: Required, recommended, &amp; optional. Fields under the
        required section must be filled out to build a package.
      </p>

      <p>
        Detailed information on the purpose of each field can be read in the
        <a href="https://www.debian.org/doc/debian-policy/ch-controlfields.html#binary-package-control-files-debian-control">
        binary package control files</a> section of the Debian Policy Manual.
      </p>

      <p>
        The three buttons on the top-right of the page allow you to do the following:
        <ul>
          <li><img src="/res/button/browse.png" title="open"> Load control information from a file.</li>
          <li><img src="/res/button/save.png" title="save"> Export control information to file.</li>
          <li><img src="/res/button/preview.png" title="preview"> Preview the formatted information.</li>
        </ul>
      </p>
    </div>

    <a name="depends"></a>
    <div class="box">
      <h1><a href="#toc-box">Dependencies &amp; Conflicts</a></h1>

      <p>
        Though on a separate page, dependencies &amp; conflicts are part of the control file.
      </p>

      <a class="app-screen" href="/res/screenshot/03-dependencies.png"></a>

      <p>
        To add an entry, select the type of dependency or conflict from the available categories.
        Enter the name of the package &amp; optionally version information. Press the
        <img src="/res/button/add.png" title="add"> button to add it to the list. If there is an
        alternative that can be used in place of a package, fill out the fields for the alternative
        package (category must be the same), then select the item from the list of packages already
        added &amp; press the <img src="/res/button/append.png" title="append"> button. Individual
        packages can be removed from the list with the <img src="/res/button/remove.png"
        title="remove"> button. And the entire list can be emptied with the
        <img src="/res/button/clear.png" title="clear"> button.
      </p>

      <p>
        The three buttons in upper-right of this page have the same functions as on the Control
        page.
      </p>

      <p>
        More information on
        <a href="https://www.debian.org/doc/debian-policy/ch-relationships.html#s-binarydeps">
        Binary Dependencies</a> in the Debian Policy Manual.
      </p>
    </div>

    <a name="files"></a>
    <div class="box">
      <h1><a href="#toc-box">Files</a></h1>

      <p><em>TODO:</em></p>

      <a class="app-screen" href="/res/screenshot/04-files.png"></a>
    </div>

    <a name="scripts"></a>
    <div class="box">
      <h1><a href="#toc-box">Scripts</a></h1>

      <p>
        Debian packages support four scripts that are executed at different points during the
        install or uninstall process. These scripts can be useful for handling operations outside
        the scope of package contents, such as dynamically creating or removing symbolic links or
        setting up configuration files, or executing commands to update system information such as
        the MimeTypes database.
      </p>

      <a class="app-screen" href="/res/screenshot/05-scripts.png"></a>

      <p>The supported scripts are:</p>
      <ul>
        <li><b>Pre-Install (preinst):</b> Executed before package contents are installed on the host
        system.</li>
        <li><b>Post-Install (postinst):</b> Executed after package contents are installed on
        the host system.</li>
        <li><b>Pre-Remove (prerm):</b> Executed before package contents are uninstalled from the
        host system.</li>
        <li><b>Post-Remove (postrm):</b> Executed after package contents are uninstalled from the
        host system.</li>
      </ul>

      <p>
        These files can be formatted in the syntax of any supported scripting language &amp; must
        start with the proper shebang line (#!).
      </p>

      <p>
        Debian policy supports using binary executables in place of executable scripts, but
        Debreate currently does not.
      </p>

      <p>
        Debreate also offers an Auto-Link Executables feature. This will detect executables listed
        on the Files page and generate a postinst script that will create symbolic links to them in
        the specified path. This is useful if you are installing executables to a directory that is
        not located on the system PATH but want to access it from the command line without requiring
        inputting the absolute path to the file. Auto-Link also creates a prerm script that will
        delete the link upon uninstalling the package.
      </p>

      <p>
        <b>How to use Auto-Link:</b>
      </p>

      <p>
        Press the <img src="/res/button/import.png" title="import"> button to copy any executables
        from the Files page. They will be listed in the right side panel. Then press the
        <img src="/res/button/build.png" title="generate"> button. Post-Install and Pre-Remove
        scripts will be enabled &amp; text added that when executed will place symbolic links to
        your executables in the path designated by the "Path" option. Any executables you do not
        want linked can be removed from the list with the <img src="/res/button/remove.png"
        title="remove"> button before generation.
      </p>
    </div>

    <a name="changelog"></a>
    <div class="box">
      <h1><a href="#toc-box">Changelog</a></h1>

      <p>
        A changelog file is not required by Debian policy, but is useful to inform users of fixes
        &amp; new features to your package. This page will generate changes information formatted
        according to Debian standards.
      </p>

      <a class="app-screen" href="/res/screenshot/06-changelog.png"></a>

      <p><em>TODO:</em></p>

      <p>
        The changelog file is installed to <tt>/usr/share/doc/&lt;package&gt;</tt> by default, but
        can be set to a custom path.
      </p>
    </div>

    <a name="copyright"></a>
    <div class="box">
      <h1><a href="#toc-box">Copyright</a></h1>

      <p>
        Inclusion of a copyright/license file notifies end users of how the software they are
        receieving may be used &amp; redistributed. The text may contain any licensing information
        but Debreate includes a selection of templates of commonly used free software licenses that
        can be generated. Some of which are detected on the host system &amp; others are packaged
        with the app.
      </p>

      <p>
        As with the changelog, the license file is installed to
        <tt>/usr/share/doc/&lt;package&gt;</tt>.
      </p>

      <a class="app-screen" href="/res/screenshot/07-copyright.png"></a>

      <p>
        To use a pre-defined template select the desired type from the available list. Use the
        <img src="/res/button/full.png" title="full"> button to import the entire text. Optionally
        edit to add copyright holder name &amp; email address. If a "short" template is available for
        the selected license, you can use the <img src="/res/button/short.png" title="short"> button
        to import the path to the referenced license file.
      </p>

      <p>
        The <img src="/res/button/refresh.png" title="refresh"> button can be used to refresh the
        list with new templates added in the
        <tt>${HOME}/.local/share/debreate/templates/licenses</tt> directory. Or a custom text can
        be imported with the <img src="/res/button/browse.png" title="open"> button.
      </p>
    </div>

    <a name="menu"></a>
    <div class="box">
      <h1><a href="#toc-box">Menu</a></h1>

      <p>
        This section is for an optional menu entry to be included with the package. Adding a menu
        file places an icon in the system menu upon installation.
      </p>

      <a class="app-screen" href="/res/screenshot/08-menu.png"></a>

      <p>
        Debian packages actually support multiple menu entry files using the .desktop filename
        extenstion. Currently, only creation of a single file is supported by this page. But as an
        alternative to filling out the information here, the pre-formatted files can be added on the
        Files page targeting either the directory <tt>/usr/share/applications</tt> or
        <tt>/usr/local/share/applications</tt>.
      </p>

      <p>
        As with control files, the <img src="/res/button/browse.png" title="open">,
        <img src="/res/button/save.png" title="save">, &amp;
        <img src="/res/button/preview.png" title="preview"> buttons can be used to import, export,
        or preview a .desktop menu entry file.
      </p>

      <p>
        For more information on menu files see the
        <a href="https://www.freedesktop.org/wiki/Specifications/desktop-entry-spec/">
        freedesktop.org Desktop Entry Specification</a>.
      </p>
    </div>

    <a name="build"></a>
    <div class="box">
      <h1><a href="#toc-box">Build</a></h1>

      <a class="app-screen" href="/res/screenshot/09-build.png"></a>

      <p>
        The final step in building the package. Press the <img src="/res/button/build.png"
        title="build"> button to begin. A dialog will open to select the output package name &amp;
        location. After selecting "save" a new dialog will open displaying progress of the build.
        Any errors or warnings that occur during the process should be displayed after completion.
      </p>

      <p>Options on this page:</p>
      <ul>
        <li><b>Create md5sums file:</b> A file containing hashes for the file contents of the
        package will be created. This is useful for if the package manager needs to check if files
        have been altered before installing a new version of a package.</li>
        <li><b>Strip binaries:</b> Uses the <tt>strip</tt> command to remove debugging data from any
        <a href="https://en.wikipedia.org/wiki/Executable_and_Linkable_Format">ELF binaries</a>.</li>
        <li><b>Delete staged directory:</b> Upon completion of package building, the directory tree
        constructed for temporary file placement will be deleted. It may be useful to disable this
        option for debugging build errors.</li>
        <li><b>Check package for errors with lintian:</b> If the
        <a href="https://lintian.debian.org/">Lintian Reports</a> utilities are installed the
        constructed package will be checked for compliancy with Debian standards. Lintian error
        &amp; warning tags information can be found <a href="https://lintian.debian.org/tags">
        here</a></li>
        <li><b>Install package after build:</b> Installs package after build, either in the
        background by directly calling <tt>dpkg --install</tt>, or via an available GUI package
        installer program. Requires elevated privileges &amp; will prompt for password.</li>
      </ul>
    </div>

    <div class="box center">
      <p><a href="#top">back to top</a></p>
    </div>
  </div>

  <div class="background"></div>
</body>
</html>
